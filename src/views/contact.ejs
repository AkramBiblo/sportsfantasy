<body style="
    background: url(/img/bg.jpg);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  ">
  <div class="container-fluid p-0">
    <!-- <div class="container-fluid mt-4 text-center">
    <h3 class="font-italic">Sports Fantasy</h3>
    <p class="font-italic">Your sports partner</p>
    </div> -->
    <div class="container text-center mt-1">
      <%- include('./partials/successMsg.ejs') %>
      <div class="container text-center errorMessageDiv">
        <div class="alert alert-danger">
          <h6 id="errorMessage"></h6>
        </div>
      </div>
      <div class="getTable" style="color: rgb(3, 3, 3)">
        Book your schedule <input type="date" />
      </div>
    </div>

    <div class="container-fluid mt-3">
      <!-- <h2 style="color: white;">Book your schedule</h2> -->
      <h5>
        <span id="Date"></span><span id="weekDay"></span>
      </h5>
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <td>5:00am-6:00am</td>
              <td>6:00am-7:00am</td>
              <td>7:00am-8:00am</td>
              <td>8:00am-9:00am</td>
              <td>9:00am-10:00am</td>
              <td>10:00am-11:00am</td>
              <td>11:00am-12:00pm</td>
              <td>12:00pm-1:00pm</td>
              <td>1:00pm-2:00pm</td>
              <td>2:00pm-3:00pm</td>
              <td>3:00pm-4:00pm</td>
              <td>4:00pm-5:00pm</td>
              <td>5:00pm-6:00pm</td>
              <td>6:00pm-7:00pm</td>
              <td>7:00pm-8:00pm</td>
              <td>8:00pm-9:00pm</td>
              <td>9:00pm-10:00pm</td>
              <td>10:00pm-11:00pm</td>
              <td>11:00pm-12:00am</td>
              <td>12:00am-1:00am</td>
              <td>1:00am-2:00am</td>
              <td>2:00am-3:00am</td>
              <td>3:00am-4:00am</td>
              <td>4:00am-5:00am</td>
            </tr>
          </thead>
          <tbody>
            <tr id="data"></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col-sm text-center d-flex flex-wrap align-content-center">
        <!-- <img class="img-fluid rounded p-2" src="/img/banner_2.jpg" alt="Football turf"> -->
        <div class="container p-3">
          <h1
            class="font-italic _head"
            id="firstHeading"
            style="font-family: Sofia, sans-serif;">
            Contact Us for Booking!!! <br/>
          </h1>
          <h2 class="font-italic hotline">
            Hotline: 01878-369731
          </h2>
        </div>
      </div>
      <div class="col">
        <div class="container text-center embed-responsive embed-responsive-16by9">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3690.69904444689!2d91.76810157492936!3d22.327218979667325!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30acd9c7cd7470b5%3A0x6d3b8683218d591e!2sSports%20Fantasy!5e0!3m2!1sen!2sbd!4v1697094167318!5m2!1sen!2sbd"
            width="600"
            height="450"
            style="border: 0"
            class="embed-responsive-item"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>
    </div>
  </div>
    <%- include('./partials/footer.ejs') %>

  <script>
    $(".errorMessageDiv").hide();
    $("table").hide();

    $(document).ready(() => {
      $("td").attr("style", "color:black;");

      $(`input[type="date"]`).change(() => {
        $("#data").empty();
        $("table").show();
        let date = $(`input[type="date"]`).val();
        $.ajax({
          url: "/findSchedule",
          method: "POST",
          data: {
            SI: date,
          },
          success: (data) => {
            if (data == "Back dated schedule can not be booked!") {
              $(".successMsgDiv").hide();
              $(".errorMessageDiv").show();
              $("#errorMessage").text(data);
            } else {
              $(".errorMessageDiv").hide();
              $(".successMsgDiv").hide();
              $("#data").empty();
              let sData = Object.values(data[0]);
              $("#Date").text(data[1]);
              $("#weekDay").text(data[2]);
              let timeSchedule = 0;
              for (let i = 3; i < sData.length; i++) {
                timeSchedule++;
                const e = sData[i];
                if (e == null || e == "") {
                  $("#data").append(
                    `<td class="bg-success" onclick="getData(this)" data-id="${timeSchedule}" data-day="${data[3]}" data-month="${data[4]}">Available</td>`
                  );
                } else {
                  $("#data").append(
                    `<td class="bg-danger" data-id="${timeSchedule}" data-day="${data[3]}" data-month="${data[4]}">Booked</td>`
                  );
                }
              }
            }
          },
        });
      });

    });

    function getData(e) {
      let day = e.getAttribute("data-day");
      let month = e.getAttribute("data-month");
      let timeSchedule = e.getAttribute("data-id");

      let form = `<div class="container-fluid text-center pt-4">
      <hr><hr>
      <div class="container-fluid text-center p-0 logoDiv">
          <h1 style="font-family: Cooper Black, Fantasy, sans-serif; font-size: 28px;" class="mt-2 _head text-dark">Sports<strong><i style="font-size:30px" class="fa">&#xf1e3;</i></strong>Fantasy</h1>
      </div>
      <hr><hr>
      <div class="container-fluid d-flex justify-content-center text-center mt-3 mb-3 pb-2">
        <a class="" href="/user"><button class="btn btn-outline-dark" style="border-radius: 20px;">Home</button></a>
        <a class="" href="/features"><button class="btn btn-outline-dark" style="border-radius: 20px;">Features</button></a>
        <a class="" href="/contact"><button class="btn btn-outline-dark" style="border-radius: 20px;">Contact</button></a>
      </div>
    </div>
      <div class="container text-center" style="width: 300px;">
        <form action="/bookSchedule" method="post">
            <div class="container mt-2">
                <div class="row mt-2">
                   
                    <div class="col">
                      <input id="name" type="text" class="form-control" name="name" placeholder="Name" required/>
                    </div>
                  </div>
                  <div class="row mt-2">
                  
                    <div class="col">
                      <input id="mobile" type="text" class="form-control" name="mobile" placeholder="Mobile" required/>
                    </div>
                  </div>
                  <div class="container d-flex justify-content-end mt-4 mr-3">
                    <input type="hidden" name="day" value="${day}"/>
                    <input type="hidden" name="month" value="${month}"/>
                    <input type="hidden" name="timeSchedule" value="${timeSchedule}"/>
                    <input class="btn btn-outline-dark" style="border-radius: 20px;" name="submit" type="submit" value="Book" />
                </div>
            </form>
  </div>`;


      var originalContents = document.body.innerHTML;

      document.body.innerHTML = form;

      // window.print();

      // document.body.innerHTML = originalContents;
    }

  </script>
</body>
